{{ block content }}

<style>
    .instructions-container {
        font-family: Arial, sans-serif;
        margin: 0 auto;
        max-width: 800px;
        padding: 20px;
    }
    .section {
        margin-bottom: 20px;
        border: 1px solid #ccc;
        border-radius: 10px;
        padding: 15px;
        background-color: #f8f8f8;
    }
    .section-header {
        font-weight: bold;
        margin-bottom: 10px;
    }
    .instructions-container img {
        display: block; /* Allows margin auto to work for horizontal centering */
        margin: 0 auto; /* Centers the image horizontally */
        max-width: 100%; /* Ensures the image does not exceed the container width */
        height: auto; /* Maintains the aspect ratio */
    }
</style>

<div class="instructions-container">
    <h1>Instructions</h1>

    <h2>General instructions</h2>

    <div class="section">
        <div class="section-header">Welcome</div>
        <p>Welcome to the Bargaining Experiment. In this game, you will be randomly paired with another participant to
            negotiate a division of a sum of money.</p>
    </div>

    <div class="section">
        <div class="section-header">Objective</div>
        <p>Your goal is to reach an agreement on how to divide {{ C.PIE_SIZE }} Experimental Currency Units (ECU)
            between the two of you.</p>
        <p>If you don't, a disagreement option will be automatically implemented. This option is described in the
            section "If No Agreement Is Reached".</p>
    </div>

    <div class="section">
        <div class="section-header">Time Limit</div>
        <p>There is a time limit for the negotiation. If an agreement is not reached within this time, the game will
            end, and the disagreement option will be automatically implemented.</p>
    </div>

    <div class="section">
        <div class="section-header">Roles</div>
        <p>You will be randomly assigned as either Player 1 or Player 2. The other participant will take the opposite
            role.</p>
    </div>

    <h2>How the game works</h2>

    <div class="section">
        <div class="section-header">Communication</div>
        <p>You can communicate with your partner using the chat feature during the game. The image below displays the
        chat as it will be displayed during the experiment.</p>
        <img src="{{ static 'images/instructions_chat.png' }}" alt="Chat">
    </div>

    <div class="section">
        <div class="section-header">Making Offers</div>
        <p>In the input fields, you can enter an amount both for you and the other player. These amounts can range
            from 0 to {{ C.PIE_SIZE }} and the sum of the two amounts has to equal {{ C.PIE_SIZE }}. Once you have
            entered an offer, click on "Send Offer" to send it to the other player. Once your offer is sent, you
            will see it displayed on the right in the fields "Your current offer".</p>
        <p>Even if you already sent an offer, you are free to make a new offer and send it. Doing so, it will replace
        your previous offer.</p>
        <img src="{{ static 'images/instructions_offer.png' }}" alt="Making an Offer">
    </div>

    <div class="section">
        <div class="section-header">Responding to Offers</div>
        <p>When you receive an offer from the other player, you can choose to accept it or ignore it. If you accept it,
        it will end the game and the {{ C.PIE_SIZE }} ECU will be shared as it has been accepted.</p>
        <img src="{{ static 'images/instructions_accept.png' }}" alt="Responding to an Offer">
    </div>

    <div class="section">
        <div class="section-header">Canceling Offers</div>
        <p>If you wish to retract an offer before the other player responds, click "Cancel Offer". If you do, your
            previous offer will not be acceptable anymore from the other player. You will still be able to make new
            offers.</p>
        <img src="{{ static 'images/instructions_cancel.png' }}" alt="Canceling an Offer">
    </div>

    <div class="section">
        <div class="section-header">Stopping Bargaining</div>
        <p>If you prefer not to continue negotiating and accept the disagreement option, click "Stop Bargaining".
            This will end the game with a predefined disagreement payoff. A pop-up window will be displayed and you
            will have to confirm your decision to stop bargaining.</p>
        <img src="{{ static 'images/instructions_stop.png' }}" alt="Stopping Bargaining">
    </div>

    <div class="section">
        <div class="section-header">If No Agreement Is Reached</div>
        {% if player.session.config.get('treatment') == 'bargain' or player.session.config.get('treatment') == 'test' and player.round_number == 1 %}
            <p>If no agreement is reached before the end of the negotiation time or if a player decides to end the
                negotiation without agreement, the ECU will be automatically allocated as follows: Player 1 will
                receive {{ C.DISAGREEMENT_PAYOFF_P1 }} ECU and Player 2 will receive {{ C.DISAGREEMENT_PAYOFF_P2 }}
                ECU.</p>
        {% else %}
            <p>If no agreement is reached before the end of the negotiation time or if a player decides to end the
                negotiation without agreement, you will have to play the Disagreement option game to determine your
                payoffs.</p>
        {% endif %}
    </div>

    {% if player.session.config.get('treatment') == 'prisoner' or player.session.config.get('treatment') == 'test' and player.round_number == 2 %}
        <div class="section">
            <div class="section-header">Disagreement option Instructions</div>
            <p>In the Prisoner's Dilemma, you and the other player must independently decide whether to Cooperate or
                Defect. Your payoff depends on both your decision and the other player's decision:</p>
            <ul>
                <li>If both players Cooperate, each earns {{ C.mutual_cooperation_payoff_PD }} ECU.</li>
                <li>If one Cooperates and the other Defects, the Defector earns {{ C.betray_payoff_PD }} ECU, and the
                    Cooperator earns {{ C.betrayed_payoff_PD }} ECU.</li>
                <li>If both players Defect, Player 1 earns {{ C.mutual_betrayal_payoff_PD_p1 }} ECU, and Player 2
                    earns {{ C.mutual_betrayal_payoff_PD_p2 }} ECU.</li>
            </ul>
        </div>
    {% elif player.session.config.get('treatment') == 'staghunt' or player.session.config.get('treatment') == 'test' and player.round_number == 3 %}
        <div class="section">
            <div class="section-header">Disagreement option Instructions</div>
            <p>In the Stag Hunt game, you and the other player must independently decide whether to hunt the Stag or
                Hares. Your payoff depends on both your decision and the other player's decision:</p>
            <ul>
                <li>If both players play Choice 1, each earns {{ C.both_stag_payoff }} ECU.</li>
                <li>If Player 1 plays Choice 1 and Player 2 plays Choice 2, Player 1 earns {{ C.stag_hare_payoff }} EC and
                    Player 2 earns {{ C.hare_stag_payoff_p2 }} ECU.</li>
                <li>If Player 1 plays Choice 1 and Player 2 plays Choice 2, Player 1 earns {{ C.hare_stag_payoff_p1 }} ECU and
                    Player 2 earns {{ C.stag_hare_payoff }} ECU.</li>
                <li>If both players play Choice 2, Player 1 earns {{ C.both_hare_payoff_p1 }} ECU, and Player 2 earns
                    {{ C.both_hare_payoff_p2 }} ECU.</li>
            </ul>
        </div>
    {% endif %}

    <h2>Payment</h2>

    <div class="section">
        <div class="section-header">Payoffs</div>
        <p>At the end of the experiment, one round will be randomly chosen by the computer. The ECU you earned in this
            round will be converted in JPY at the rate of 1 ECU = {{ C.CONVERSION_RATE }} JPY.</p>
    </div>

    {{ next_button }}
</div>

{{ endblock }}
